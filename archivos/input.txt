world int G endl
world float PI endl
world int Z endl

gift int sum2 ¿ int a, int b ? ¡
    local int r endl
    r = a + b endl
    show ¿ r ? endl
    return r endl
!

gift int absDiff ¿ int a, int b ? ¡
    local int d endl
    decide of
        a >= b -> ¡
            d = a - b endl
        !
    else ->
        ¡
            d = b - a endl
        !
    end decide endl
    show ¿ d ? endl
    return d endl
!

gift int classify ¿ int x ? ¡
    decide of
        x < 5 -> ¡
            show ¿ "small" ? endl
            return 0 endl
        !
        x < 20 -> ¡
            show ¿ "medium" ? endl
            return 0 endl
        !
    else ->
        ¡
            show ¿ "large" ? endl
            return 0 endl
        !
    end decide endl
!

gift float areaCircle ¿ float r ? ¡
    local float a endl
    a = PI * r endl
    a = a * r endl
    show ¿ a ? endl
    return a endl
!

gift bool inRange ¿ int x, int lo, int hi ? ¡
    local bool b1 endl
    local bool b2 endl
    local bool ok endl
    b1 = x >= lo endl
    b2 = x <= hi endl
    ok = b1 @ b2 endl
    show ¿ ok ? endl
    return ok endl
!

coal navidad ¿ ? ¡
    local int i endl
    local int f endl
    local int total endl
    local int tmp endl

    local bool bA endl
    local bool bB endl
    local bool bC endl
    local bool bD endl

    local float rr endl
    local float aa endl

    local char ch endl
    local string msg endl

    G = 2 endl
    PI = 3.0 endl
    Z = 0 endl

    msg = "FINAL_TEST" endl
    show ¿ msg ? endl

    ch = 'K' endl
    show ¿ ch ? endl

    total = 0 endl
    i = 0 endl

    for ¿ i = i endl i < 10 endl ++i ? ¡
        tmp = sum2 ¿ i, G ? endl
        f = tmp endl
        show ¿ f ? endl

        tmp = classify ¿ f ? endl

        total = total + f endl

        decide of
            i == 4 -> ¡
                show ¿ "break" ? endl
                break endl
            !
        end decide endl
    !

    show ¿ total ? endl

    bA = total >= 10 endl
    bB = total <= 30 endl
    bC = bA @ bB endl
    bD = Σ bC endl

    show ¿ bA ? endl
    show ¿ bB ? endl
    show ¿ bC ? endl
    show ¿ bD ? endl

    decide of
        bC == true -> ¡
            show ¿ "range_ok" ? endl
        !
    else ->
        ¡
            show ¿ "range_bad" ? endl
        !
    end decide endl

    tmp = absDiff ¿ total, 17 ? endl
    show ¿ tmp ? endl

    bA = inRange ¿ tmp, 0, 10 ? endl

    bB = tmp == 3 endl
    bC = bA ~ bB endl
    show ¿ bC ? endl

    rr = 2.0 endl
    aa = areaCircle ¿ rr ? endl

    loop
        Z = Z + 1 endl
        show ¿ Z ? endl
    exit when ¿ Z >= 5 ? endl
    end loop endl

    loop
        total = total + 3 endl
        show ¿ total ? endl
    exit when ¿ total >= 29 ? endl
    end loop endl

    show ¿ "done" ? endl
    return 0 endl
!
